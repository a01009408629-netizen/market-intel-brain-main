# API Gateway Configuration
server:
  host: "0.0.0.0"
  port: 8080
  grpc_port: 8081
  read_timeout: 30s
  write_timeout: 30s
  idle_timeout: 60s

database:
  host: "localhost"
  port: 5432
  name: "market_intel_brain"
  user: "postgres"
  password: "password"
  ssl_mode: "disable"
  max_connections: 20
  max_idle_connections: 10
  connection_max_lifetime: 1h

redis:
  host: "localhost"
  port: 6379
  password: ""
  db: 0
  pool_size: 10
  min_idle_connections: 5
  max_retries: 3
  dial_timeout: 5s
  read_timeout: 3s
  write_timeout: 3s

kafka:
  brokers:
    - "localhost:9092"
  topics:
    data_ingestion: "data-ingestion"
    analytics: "analytics-events"
    notifications: "notifications"
  consumer_group: "api-gateway-group"
  batch_size: 100
  batch_timeout: 100ms
  compression_type: "gzip"

security:
  jwt:
    secret: "your-super-secret-jwt-key-change-in-production"
    expiration: 24h
    refresh_expiration: 168h
  cors:
    allowed_origins:
      - "http://localhost:3000"
      - "https://app.market-intel-brain.com"
    allowed_methods:
      - "GET"
      - "POST"
      - "PUT"
      - "DELETE"
      - "OPTIONS"
    allowed_headers:
      - "Content-Type"
      - "Authorization"
      - "X-Requested-With"
    allow_credentials: true
    max_age: 86400

logging:
  level: "info"
  format: "json"
  output: "stdout"
  file_path: "/var/log/api-gateway/app.log"
  max_size: 100
  max_backups: 3
  max_age: 28
  compress: true

metrics:
  enabled: true
  path: "/metrics"
  port: 9090
  interval: 30s

tracing:
  enabled: true
  service_name: "api-gateway"
  jaeger:
    endpoint: "http://localhost:14268/api/traces"
    service_name: "api-gateway"
  prometheus:
    enabled: true
    endpoint: "/metrics"

rate_limiting:
  enabled: true
  requests_per_minute: 100
  burst: 200
  cleanup_interval: 1m

circuit_breaker:
  enabled: true
  failure_threshold: 5
  recovery_timeout: 30s
  success_threshold: 2
